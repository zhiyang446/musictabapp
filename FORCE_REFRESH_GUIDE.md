# 🔄 强制刷新指南 - 解决缓存问题

## 问题描述
即使修复了端口配置，Web 版本可能仍然使用缓存的旧配置，导致连接到错误的端口。

## 解决方案

### 方法 1: 硬刷新浏览器 (推荐)

1. **打开移动端应用**: http://localhost:8081
2. **执行硬刷新**:
   - **Windows**: `Ctrl + Shift + R` 或 `Ctrl + F5`
   - **Mac**: `Cmd + Shift + R`
   - **或者**: 右键点击刷新按钮 → 选择"硬性重新加载"

### 方法 2: 清除浏览器缓存

1. **Chrome**:
   - 按 `F12` 打开开发者工具
   - 右键点击刷新按钮
   - 选择 "清空缓存并硬性重新加载"

2. **Firefox**:
   - 按 `Ctrl + Shift + Delete`
   - 选择清除缓存
   - 刷新页面

### 方法 3: 使用无痕模式

1. 打开浏览器的无痕/隐私模式
2. 访问 http://localhost:8081
3. 这样会绕过所有缓存

### 方法 4: 重启 Expo 开发服务器

如果上述方法都不行，重启 Expo:

```bash
# 在 Expo 终端中按 Ctrl+C 停止
# 然后重新启动
cd apps/mobile
npm start
```

## 验证修复

刷新后，检查以下内容：

1. **打开浏览器开发者工具** (F12)
2. **查看 Network 标签**
3. **尝试上传操作**
4. **确认请求发送到正确的端口**: 应该看到 `8080` 而不是 `8000`

## 如果仍然有问题

如果硬刷新后仍然有连接问题，可能是以下原因：

### 检查清单:

- [ ] Orchestrator 服务是否在运行? (`http://localhost:8080/health`)
- [ ] 防火墙是否阻止了连接?
- [ ] 是否在正确的网络环境中?
- [ ] 浏览器是否支持 fetch API?

### 调试步骤:

1. **打开调试工具**: 访问 `debug-web-config.html`
2. **检查环境变量**: 确认配置是否正确加载
3. **测试直接连接**: 使用调试工具测试各种 URL
4. **查看控制台错误**: 检查浏览器控制台的详细错误信息

## 快速测试命令

```bash
# 测试 API 连接
curl http://localhost:8080/health

# 测试网络 IP 连接  
curl http://192.168.1.105:8080/health

# 检查端口占用
netstat -an | findstr :8080
```

---

**记住**: Web 应用的缓存机制可能会保留旧的配置，硬刷新是解决此类问题的最有效方法！
